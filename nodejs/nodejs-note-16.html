<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"sunjinkang.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="fs (文件系统)通过 require(‘fs’) 使用该模块。所有的方法都有异步和同步的形式。  异步方法的最后一个参数都是一个回调函数。 传给回调函数的参数取决于具体方法，但回调函数的第一个参数都会保留给异常。 如果操作成功完成，则第一个参数会是 null 或 undefined。   使用同步方法，任何异常都会被立即抛出。 可以使用 try&#x2F;catch 来处理异常，或让异常向上冒泡。1234">
<meta property="og:type" content="blog">
<meta property="og:title" content="nodejs基础知识(9)">
<meta property="og:url" content="https://sunjinkang.github.io/nodejs/nodejs-note-16.html">
<meta property="og:site_name" content="Sun with no word">
<meta property="og:description" content="fs (文件系统)通过 require(‘fs’) 使用该模块。所有的方法都有异步和同步的形式。  异步方法的最后一个参数都是一个回调函数。 传给回调函数的参数取决于具体方法，但回调函数的第一个参数都会保留给异常。 如果操作成功完成，则第一个参数会是 null 或 undefined。   使用同步方法，任何异常都会被立即抛出。 可以使用 try&#x2F;catch 来处理异常，或让异常向上冒泡。1234">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/file-mode.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/permission-number.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/fs-const-access.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/fs-const-open-1.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/fs-const-open-2.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/fs-const-mode.png">
<meta property="og:image" content="https://sunjinkang.github.io/nodejs/images/fs-const-mode-1.png">
<meta property="article:published_time" content="2023-01-10T05:13:23.000Z">
<meta property="article:modified_time" content="2023-07-24T09:24:46.499Z">
<meta property="article:author" content="Sun Jinkang">
<meta property="article:tag" content="node">
<meta property="article:tag" content="fs (文件系统)">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sunjinkang.github.io/nodejs/images/file-mode.png">


<link rel="canonical" href="https://sunjinkang.github.io/nodejs/nodejs-note-16">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":false,"lang":"zh-CN","comments":true,"permalink":"https://sunjinkang.github.io/nodejs/nodejs-note-16.html","path":"nodejs/nodejs-note-16.html","title":"nodejs基础知识(9)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>nodejs基础知识(9) | Sun with no word
</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Sun with no word" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>
  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Sun with no word</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">something about what I have learned and some interesting things</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-vue"><a href="/vue" rel="section"><i class="fa fa-archive fa-fw"></i>vue</a></li><li class="menu-item menu-item-commonweal"><a href="/404.html" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#fs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.</span> <span class="nav-text">fs (文件系统)</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#WHATWG"><span class="nav-number">1.0.1.</span> <span class="nav-text">WHATWG</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#fs-FSWatcher-%E7%B1%BB"><span class="nav-number">1.0.2.</span> <span class="nav-text">fs.FSWatcher 类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#fs-ReadStream-%E7%B1%BB"><span class="nav-number">1.0.3.</span> <span class="nav-text">fs.ReadStream 类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#fs-Stats-%E7%B1%BB"><span class="nav-number">1.0.4.</span> <span class="nav-text">fs.Stats 类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Stat-%E6%97%B6%E9%97%B4%E5%80%BC"><span class="nav-number">1.0.5.</span> <span class="nav-text">Stat 时间值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#fs-WriteStream-%E7%B1%BB"><span class="nav-number">1.0.6.</span> <span class="nav-text">fs.WriteStream 类</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#File-modes"><span class="nav-number">1.0.7.</span> <span class="nav-text">File modes</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sun Jinkang"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Sun Jinkang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/sunjinkang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;sunjinkang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2060037942@qq.com" title="E-Mail → mailto:2060037942@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <img src="/images/backToTop.png" />
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/sunjinkang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner page posts-expand">


    
    
    
    <div class="post-block" lang="zh-CN"><header class="post-header post-top-background" id="id-post-top">

<h1 class="post-title" itemprop="name headline">nodejs基础知识(9)
</h1>

<div class="post-meta-container">
</div>

</header>

      
      
      <div class="post-body">
          <h4 id="fs-文件系统"><a href="#fs-文件系统" class="headerlink" title="fs (文件系统)"></a>fs (文件系统)</h4><p>通过 require(‘fs’) 使用该模块。<br>所有的方法都有异步和同步的形式。</p>
<ul>
<li>异步方法的最后一个参数都是一个回调函数。<ul>
<li>传给回调函数的参数取决于具体方法，但回调函数的第一个参数都会保留给异常。</li>
<li>如果操作成功完成，则第一个参数会是 null 或 undefined。</li>
</ul>
</li>
<li>使用同步方法，任何异常都会被立即抛出。<ul>
<li>可以使用 try/catch 来处理异常，或让异常向上冒泡。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步方法</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&#x27;/tmp/hello&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成功删除 /tmp/hello&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步方法</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">unlinkSync</span>(<span class="string">&#x27;/tmp/hello&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;成功删除 /tmp/hello&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><em>注意：异步方法的执行先后顺序不能保证，正确的做法是使用回调函数进行关联</em></p>
<p>在繁忙的进程中，建议使用异步的方法。 同步的方法会阻塞整个进程，直到完成（停止所有连接）。<br>可以使用文件名的相对路径。 路径是相对 process.cwd() 的。</p>
<p><em>注意: 在 Windows 上，使用 w 选项(通过 fs.open 或 fs.writeFile) 打开已有隐藏文件将会失败，错误信息为 EPERM 。已有隐藏文件可以通过 r+ 选项打开。调用 fs.ftruncate 可以用来重置文件内容。</em></p>
<h6 id="WHATWG"><a href="#WHATWG" class="headerlink" title="WHATWG"></a>WHATWG</h6><p>对于大多数 fs 模块的函数， path 或者 filename 参数可以当作一个 WHATWG URL 对象传入。 只有 URL 对象使用被支持的 file: 协议。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">URL</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fileUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;file:///tmp/hello&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">readFileSync</span>(fileUrl);</span><br></pre></td></tr></table></figure>
<p><em>注意： file: URLS 必须是绝对路径。</em></p>
<ul>
<li>在 Windows 上， 携带主机名的 file: URLs 被转换为 UNC 路径</li>
<li>有硬盘盘符的 file: URLs 会被转换成 本地绝对路径。</li>
<li>既没有主机名，也没有盘符的 file: URLs 在转换时会抛出错误。<ul>
<li>注意： 携带盘符的 file: URLs 必须使用 : 作为盘符后的分隔符。使用其他符号会抛出错误。</li>
</ul>
</li>
<li>在其他所有的平台上， 都不支持携带主机名的 file: URLs，且会抛出错误。</li>
<li>当 file: URL 包含已经编码的斜线符号会在所有平台抛出错误。</li>
<li>在 Windows 上， 携带已编码的反斜线 file: URLs 在编码时会抛出错误。</li>
</ul>
<h6 id="fs-FSWatcher-类"><a href="#fs-FSWatcher-类" class="headerlink" title="fs.FSWatcher 类"></a>fs.FSWatcher 类</h6><p>从 fs.watch() 返回的对象是该类型。<br>提供给 fs.watch() 的 listener 回调会接收返回的 FSWatcher 的 change 事件。<br>该对象本身可触发以下事件：</p>
<ul>
<li><p>‘change’ 事件<br>eventType <string> fs 变化的类型<br>filename <string> | <Buffer> 变化的文件名（如果是相关的/可用的）<br>当一个被监视的目录或文件有变化时触发。 详见 fs.watch()。<br>filename 参数可能不会被提供，这依赖于操作系统支持。 如果提供了 filename，则若 fs.watch() 被调用时 encoding 选项被设置为 ‘buffer’ 则它会是一个 Buffer，否则 filename 是一个字符串。</Buffer></string></string></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例子，处理 fs.watch 监听器</span></span><br><span class="line">fs.<span class="title function_">watch</span>(<span class="string">&#x27;./tmp&#x27;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;buffer&#x27;</span> &#125;, <span class="function">(<span class="params">eventType, filename</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (filename) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(filename);</span><br><span class="line">    <span class="comment">// 输出: &lt;Buffer ...&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li><p>‘error’ 事件<br>error <Error><br>当发生错误时触发。</Error></p>
</li>
<li><p>watcher.close()<br>停止监听 fs.FSWatcher 的变化。</p>
</li>
</ul>
<h6 id="fs-ReadStream-类"><a href="#fs-ReadStream-类" class="headerlink" title="fs.ReadStream 类"></a>fs.ReadStream 类</h6><p>ReadStream 是一个可读流。</p>
<ul>
<li><p>‘close’ 事件<br>当 ReadStream 底层的文件描述符被关闭时触发。</p>
</li>
<li><p>‘open’ 事件<br>fd <integer> 被 ReadStream 使用的整数文件描述符。<br>当 ReadStream 的文件被打开时触发。</integer></p>
</li>
<li><p>readStream.bytesRead<br>已读取的字节数。</p>
</li>
<li><p>readStream.path<br>流正在读取的文件的路径，指定在 fs.createReadStream() 的第一个参数。 如果 path 传入的是一个字符串，则 readStream.path 是一个字符串。 如果 path 传入的是一个 Buffer，则 readStream.path 是一个 Buffer。</p>
</li>
</ul>
<h6 id="fs-Stats-类"><a href="#fs-Stats-类" class="headerlink" title="fs.Stats 类"></a>fs.Stats 类</h6><p>从 fs.stat()、fs.lstat() 和 fs.fstat() 及其同步版本返回的对象都是该类型。</p>
<ul>
<li>stats.isFile()</li>
<li>stats.isDirectory()</li>
<li>stats.isBlockDevice()</li>
<li>stats.isCharacterDevice()</li>
<li>stats.isSymbolicLink() (仅对 fs.lstat() 有效)</li>
<li>stats.isFIFO()</li>
<li>stats.isSocket()<br>对于一个普通文件，util.inspect(stats) 会返回一个类似如下的字符串：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Stats</span> &#123;</span><br><span class="line">  <span class="attr">dev</span>: <span class="number">2114</span>,</span><br><span class="line">  <span class="attr">ino</span>: <span class="number">48064969</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">33188</span>,</span><br><span class="line">  <span class="attr">nlink</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">uid</span>: <span class="number">85</span>,</span><br><span class="line">  <span class="attr">gid</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">rdev</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="number">527</span>,</span><br><span class="line">  <span class="attr">blksize</span>: <span class="number">4096</span>,</span><br><span class="line">  <span class="attr">blocks</span>: <span class="number">8</span>,</span><br><span class="line">  <span class="attr">atimeMs</span>: <span class="number">1318289051000.1</span>,</span><br><span class="line">  <span class="attr">mtimeMs</span>: <span class="number">1318289051000.1</span>,</span><br><span class="line">  <span class="attr">ctimeMs</span>: <span class="number">1318289051000.1</span>,</span><br><span class="line">  <span class="attr">birthtimeMs</span>: <span class="number">1318289051000.1</span>,</span><br><span class="line">  <span class="attr">atime</span>: <span class="title class_">Mon</span>, <span class="number">10</span> <span class="title class_">Oct</span> <span class="number">2011</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">11</span> <span class="variable constant_">GMT</span>,</span><br><span class="line">  <span class="attr">mtime</span>: <span class="title class_">Mon</span>, <span class="number">10</span> <span class="title class_">Oct</span> <span class="number">2011</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">11</span> <span class="variable constant_">GMT</span>,</span><br><span class="line">  <span class="attr">ctime</span>: <span class="title class_">Mon</span>, <span class="number">10</span> <span class="title class_">Oct</span> <span class="number">2011</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">11</span> <span class="variable constant_">GMT</span>,</span><br><span class="line">  <span class="attr">birthtime</span>: <span class="title class_">Mon</span>, <span class="number">10</span> <span class="title class_">Oct</span> <span class="number">2011</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">11</span> <span class="variable constant_">GMT</span> &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="Stat-时间值"><a href="#Stat-时间值" class="headerlink" title="Stat 时间值"></a>Stat 时间值</h6><p>stat 对象中的时间有以下语义：</p>
<ul>
<li>atime “访问时间” - 文件数据最近被访问的时间。 会被 mknod(2)、 utimes(2) 和 read(2) 系统调用改变。</li>
<li>mtime “修改时间” - 文件数据最近被修改的时间。 会被 mknod(2)、 utimes(2) 和 write(2) 系统调用改变。</li>
<li>ctime “变化时间” - 文件状态最近更改的时间（修改索引节点数据） 会被 chmod(2)、 chown(2)、 link(2)、 mknod(2)、 rename(2)、 unlink(2)、 utimes(2)、 read(2) 和 write(2) 系统调用改变。</li>
<li>birthtime “创建时间” - 文件创建的时间。 当文件被创建时设定一次。 在创建时间不可用的文件系统中，该字段可能被替代为 ctime 或 1970-01-01T00:00Z（如 Unix 的纪元时间戳 0）。 注意，该值在此情况下可能会大于 atime 或 mtime。 在 Darwin 和其它的 FreeBSD 衍生系统中，如果 atime 被使用 utimes(2) 系统调用显式地设置为一个比当前 birthtime 更早的值，也会有这种情况。</li>
</ul>
<h6 id="fs-WriteStream-类"><a href="#fs-WriteStream-类" class="headerlink" title="fs.WriteStream 类"></a>fs.WriteStream 类</h6><p>WriteStream 一个可写流。</p>
<p>‘close’ 事件<br>当 WriteStream 底层的文件描述符被关闭时触发。</p>
<p>‘open’ 事件<br>fd <integer> 被 WriteStream 使用的整数文件描述符。<br>当 WriteStream 的文件被打开时触发。</integer></p>
<p>writeStream.bytesWritten<br>已写入的字节数。 不包括仍在排队等待写入的数据。</p>
<p>writeStream.path<br>流正在写入的文件的路径，指定在 fs.createWriteStream() 的第一个参数。 如果 path 传入的是一个字符串，则 writeStream.path 是一个字符串。 如果 path 传入的是一个 Buffer，则 writeStream.path 是一个 Buffer。</p>
<p>fs.access(path[, mode], callback)</p>
<ul>
<li>path <string> | <Buffer> | <URL></URL></Buffer></string></li>
<li>mode <integer> Default: fs.constants.F_OK</integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>测试 path 指定的文件或目录的用户权限。 mode 是一个可选的整数，指定要执行的可访问性检查。 以下常量定义了 mode 的可能值。 可以创建由两个或更多个值的位或组成的掩码（例如 fs.constants.W_OK | fs.constants.R_OK）。</Error></li>
<li>fs.constants.F_OK - path 文件对调用进程可见。 这在确定文件是否存在时很有用，但不涉及 rwx 权限。 如果没指定 mode，则默认为该值。</li>
<li>fs.constants.R_OK - path 文件可被调用进程读取。</li>
<li>fs.constants.W_OK - path 文件可被调用进程写入。</li>
<li>fs.constants.X_OK - path 文件可被调用进程执行。 对 Windows 系统没作用（相当于 fs.constants.F_OK）。<br>最后一个参数 callback 是一个回调函数，会带有一个可能的错误参数被调用。 如果可访问性检查有任何的失败，则错误参数会是一个 Error 对象。 下面的例子会检查 /etc/passwd 文件是否可以被当前进程读取和写入。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">access</span>(<span class="string">&#x27;/etc/passwd&#x27;</span>, fs.<span class="property">constants</span>.<span class="property">R_OK</span> | fs.<span class="property">constants</span>.<span class="property">W_OK</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err ? <span class="string">&#x27;no access!&#x27;</span> : <span class="string">&#x27;can read/write&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>不建议在调用 fs.open() 、 fs.readFile() 或 fs.writeFile() 之前使用 fs.access() 检查一个文件的可访问性。 如此处理会造成紊乱情况，因为其他进程可能在两个调用之间改变该文件的状态。 作为替代，用户代码应该直接打开/读取/写入文件，当文件无法访问时再处理错误。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">open</span>(<span class="string">&#x27;myfile&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="function">(<span class="params">err, fd</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">code</span> === <span class="string">&#x27;ENOENT&#x27;</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;myfile does not exist&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">readMyData</span>(fd);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><em>通常，仅在文件不会被直接使用时才检查一个文件的可访问性，例如当它的可访问性是来自另一个进程的信号。</em></p>
<p>fs.accessSync(path[, mode])<br><em>参数说明同上</em><br>如果可访问性检查有任何的失败，则错误参数会是一个 Error 对象。 否则返回 undefined。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  fs.<span class="title function_">accessSync</span>(<span class="string">&#x27;etc/passwd&#x27;</span>, fs.<span class="property">constants</span>.<span class="property">R_OK</span> | fs.<span class="property">constants</span>.<span class="property">W_OK</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;can read/write&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;no access!&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fs.appendFile(file, data[, options], callback)</p>
<ul>
<li>file <string> | <Buffer> | <URL> | <number> 文件名或文件描述符</number></URL></Buffer></string></li>
<li>data <string> | <Buffer></Buffer></string></li>
<li>options <Object> | <string></string></Object></li>
<li>encoding <string> | <null> 默认为 ‘utf8’</null></string></li>
<li>mode <integer> 默认为 0o666</integer></li>
<li>flag <string> 默认为 ‘a’</string></li>
<li>callback <Function></Function></li>
<li>err <Error><br>异步地追加数据到一个文件，如果文件不存在则创建文件。 data 可以是一个字符串或 Buffer。<br>如果 options 是一个字符串，则它指定了字符编码。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">appendFile</span>(<span class="string">&#x27;message.txt&#x27;</span>, <span class="string">&#x27;data to append&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The &quot;data to append&quot; was appended to file!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
file 可能是一个被打开用来追加数据的数字文件描述符（通过 fs.open() 或者 fs.openSync()）。这样的文件描述符将不会被自动关闭。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">open</span>(<span class="string">&#x27;message.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="function">(<span class="params">err, fd</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  fs.<span class="title function_">appendFile</span>(fd, <span class="string">&#x27;data to append&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.<span class="title function_">close</span>(fd, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></Error></li>
</ul>
<p>fs.appendFileSync(file, data[, options])<br>参数说明同上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  fs.<span class="title function_">appendFileSync</span>(<span class="string">&#x27;message.txt&#x27;</span>, <span class="string">&#x27;data to append&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The &quot;data to append&quot; was appended to file!&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">/* Handle the error */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fd;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  fd = fs.<span class="title function_">openSync</span>(<span class="string">&#x27;message.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  fs.<span class="title function_">appendFileSync</span>(fd, <span class="string">&#x27;data to append&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">/* Handle the error */</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (fd !== <span class="literal">undefined</span>)</span><br><span class="line">    fs.<span class="title function_">closeSync</span>(fd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>fs.chmod(path, mode, callback)</p>
<ul>
<li>path <string> | <Buffer> | <URL></URL></Buffer></string></li>
<li>mode <integer></integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>异步地改变文件的权限。 完成回调只有一个可能的异常参数。</Error></li>
</ul>
<h6 id="File-modes"><a href="#File-modes" class="headerlink" title="File modes"></a>File modes</h6><p>mode 参数会在 fs.chmod() 和 fs.chmodSync()方法中用到，它是用下面的常量进行逻辑或(logical OR)操作后的数字掩码：<br><img src="./images/file-mode.png" alt="file mode"><br>一个构造 mode 的更简单的方式是使用3位八进制串（比如，765）。最左侧的数字（例中的7）代表了文件所有者的权限。中间一位（例中的6）代表了组的权限。最右侧的数字（例中的5）代表其他人的权限。<br><img src="./images/permission-number.png" alt="permission number"><br>例如，八进制值 0o765 表示：</p>
<ul>
<li>文件所有者可以进行读、写和执行。</li>
<li>文件所属组可以读和写。</li>
<li>其他人可以对文件进行读和执行。</li>
</ul>
<p>fs.chmodSync(path, mode)<br>同步地改变文件的权限。 返回 undefined。 fs.chmod()的同步版本。</p>
<p>fs.chown(path, uid, gid, callback)</p>
<ul>
<li>path <string> | <Buffer> | <URL></URL></Buffer></string></li>
<li>uid <integer></integer></li>
<li>gid <integer></integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>异步地改变文件的所有者和群组。 完成回调只有一个可能的异常参数。</Error></li>
</ul>
<p>fs.chownSync(path, uid, gid)<br>同步地改变文件的所有者和群组。 返回 undefined。 fs.chown() 的同步版本。</p>
<p>fs.close(fd, callback)<br>fd <integer><br>callback <Function><br>err <Error><br>异步的 close(2)。 完成回调只有一个可能的异常参数。</Error></Function></integer></p>
<p>fs.closeSync(fd)<br>同步的 close(2)。返回 undefined。</p>
<p>fs.constants<br>返回一个包含常用文件系统操作的常量的对象。 具体的常量定义在 FS Constants 中描述。</p>
<p>fs.copyFile(src, dest[, flags], callback)</p>
<ul>
<li>src <string> | <Buffer> | <URL> 要被拷贝的源文件名称</URL></Buffer></string></li>
<li>dest <string> | <Buffer> | <URL> 拷贝操作的目标文件名</URL></Buffer></string></li>
<li>flags <number> 拷贝操作修饰符 默认: 0</number></li>
<li>callback <Function><br>异步的将 src 拷贝到 dest。Asynchronously copies src to dest. 默认情况下，如果 dest 已经存在会被覆盖。回调函数没有给出除了异常以外的参数。Node.js 不能保证拷贝操作的原子性。如果目标文件打开后出现错误，Node.js 将尝试删除它。<br>flags 是一个可选的整数，用于指定行为的拷贝操作。唯一支持的 flag 是 fs.constants.COPYFILE_EXCL ，如果 dest 已经存在，则会导致拷贝操作失败。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认情况下，destination.txt 将创建或覆盖</span></span><br><span class="line">fs.<span class="title function_">copyFile</span>(<span class="string">&#x27;source.txt&#x27;</span>, <span class="string">&#x27;destination.txt&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;source.txt was copied to destination.txt&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果第三个参数是数字，那么肯定是 flags，代码如下</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">COPYFILE_EXCL</span> &#125; = fs.<span class="property">constants</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 COPYFILE_EXCL ，如果 destination.txt 文件存在，操作将失败。</span></span><br><span class="line">fs.<span class="title function_">copyFile</span>(<span class="string">&#x27;source.txt&#x27;</span>, <span class="string">&#x27;destination.txt&#x27;</span>, <span class="variable constant_">COPYFILE_EXCL</span>, callback);</span><br></pre></td></tr></table></figure></Function></li>
</ul>
<p>fs.copyFileSync(src, dest[, flags])<br>参数说明同上</p>
<p>fs.createReadStream(path[, options])</p>
<ul>
<li>path <string> | <Buffer> | <URL></URL></Buffer></string></li>
<li>options <string> | <Object></Object></string></li>
<li>flags <string></string></li>
<li>encoding <string></string></li>
<li>fd <integer></integer></li>
<li>mode <integer></integer></li>
<li>autoClose <boolean></boolean></li>
<li>start <integer></integer></li>
<li>end <integer></integer></li>
<li>highWaterMark <integer><br>返回一个新建的 ReadStream 对象（详见可读流）。<br>不同于在一个可读流上设置的 highWaterMark 默认值（16 kb），该方法在相同参数下返回的流具有 64 kb 的默认值。<br>options 是一个带有以下默认值的对象或字符串：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defaults = &#123;</span><br><span class="line">  <span class="attr">flags</span>: <span class="string">&#x27;r&#x27;</span>,</span><br><span class="line">  <span class="attr">encoding</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">fd</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">0o666</span>,</span><br><span class="line">  <span class="attr">autoClose</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">highWaterMark</span>: <span class="number">64</span> * <span class="number">1024</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
options 可以包括 start 和 end 值，使其可以从文件读取一定范围的字节而不是整个文件。 start 和 end 都是包括在内的，并且起始值是 0。 如果指定了 fd 且 start 不传或为 undefined，则 fs.createReadStream() 从当前文件位置按顺序地读取。 encoding 可以是任何可以被 Buffer 接受的值。</integer></li>
</ul>
<p>如果指定了 fd，则 ReadStream 会忽略 path 参数并且会使用指定的文件描述符。 这意味着不会触发 ‘open’ 事件。 注意，fd 应该是阻塞的；非阻塞的 fd 们应该传给 net.Socket。</p>
<p>如果 autoClose 为 false，则文件描述符不会被关闭，即使有错误。 应用程序需要负责关闭它，并且确保没有文件描述符泄漏。 如果 autoClose 被设置为 true（默认），则在 error 或 end 时，文件描述符会被自动关闭。</p>
<p>mode 用于设置文件模式（权限和粘结位），但仅限创建文件时。<br>如果 options 是一个字符串，则它指定了字符编码。</p>
<p>fs.createWriteStream(path[, options])</p>
<ul>
<li>path <string> | <Buffer> | <URL></URL></Buffer></string></li>
<li>options <string> | <Object></Object></string></li>
<li>flags <string></string></li>
<li>encoding <string></string></li>
<li>fd <integer></integer></li>
<li>mode <integer></integer></li>
<li>autoClose <boolean></boolean></li>
<li>start <integer><br>返回一个新建的 WriteStream 对象（详见可写流）。<br>options 是一个带有以下默认值的对象或字符串：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defaults = &#123;</span><br><span class="line">  <span class="attr">flags</span>: <span class="string">&#x27;w&#x27;</span>,</span><br><span class="line">  <span class="attr">encoding</span>: <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">  <span class="attr">fd</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">0o666</span>,</span><br><span class="line">  <span class="attr">autoClose</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
options 也可以包括一个 start 选项，使其可以写入数据到文件某个位置。 如果是修改一个文件而不是覆盖它，则需要flags 模式为 r+ 而不是默认的 w 模式。</integer></li>
</ul>
<p>fs.existsSync(path)<br>path <string> | <Buffer> | <URL><br>fs.exists() 的同步版本。 如果路径存在，则返回 true，否则返回 false。<br><em>注意，虽然 fs.exists() 是废弃的，但 fs.existsSync() 不是。 （fs.exists() 的回调接收的参数与其他 Node.js 回调不一致，fs.existsSync() 不使用回调。）</em></URL></Buffer></string></p>
<p>fs.fchmod(fd, mode, callback)</p>
<ul>
<li>fd <integer></integer></li>
<li>mode <integer></integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>更改文件权限（文件描述符）。异步的 fchmod(2)。 完成回调只有一个可能的异常参数。</Error></li>
</ul>
<p>fs.fchmodSync(fd, mode)</p>
<ul>
<li>fd <integer></integer></li>
<li>mode <integer><br>同步的 fchmod(2)。返回 undefined。</integer></li>
</ul>
<p>fs.fchown(fd, uid, gid, callback)</p>
<ul>
<li>fd <integer></integer></li>
<li>uid <integer></integer></li>
<li>gid <integer></integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>更改给定文件描述符的所有者和组。异步的 fchown(2)。 完成回调只有一个可能的异常参数。</Error></li>
</ul>
<p>fs.fchownSync(fd, uid, gid)</p>
<ul>
<li>fd <integer></integer></li>
<li>uid <integer></integer></li>
<li>gid <integer><br>同步的 fchown(2)。返回 undefined。</integer></li>
</ul>
<p>fs.fdatasync(fd, callback)</p>
<ul>
<li>fd <integer></integer></li>
<li>callback <Function></Function></li>
<li>err <Error><br>文件数据同步。异步的 fdatasync(2)。 完成回调只有一个可能的异常参数。</Error></li>
</ul>
<p>fs.fdatasyncSync(fd)</p>
<ul>
<li>fd <integer><br>同步的 fdatasync(2)。返回 undefined。</integer></li>
</ul>
<p>fs.mkdtemp(prefix[, options], callback)<br>创建一个唯一的临时目录。<br>生成六位随机字符附加到一个要求的 prefix 后面，然后创建一个唯一的临时目录。<br>创建的目录路径会作为字符串传给回调的第二个参数。<br>可选的 options 参数可以是一个字符串并指定一个字符编码，或是一个对象且由一个 encoding 属性指定使用的字符编码。<br><em>注意：fs.mkdtemp() 方法会直接附加六位随机选择的字符串到 prefix 字符串。 例如，指定一个目录 /tmp，如果目的是要在 /tmp 里创建一个临时目录，则 prefix 必须 以一个指定平台的路径分隔符（require(‘path’).sep）结尾。</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; sep &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line">fs.<span class="title function_">mkdtemp</span>(<span class="string">`<span class="subst">$&#123;tmpDir&#125;</span><span class="subst">$&#123;sep&#125;</span>`</span>, <span class="function">(<span class="params">err, folder</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(folder);</span><br><span class="line">  <span class="comment">// 会输出类似于 `/tmp/abc123`。</span></span><br><span class="line">  <span class="comment">// 一个新的临时目录会被创建在 /tmp 目录里。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>fs.watch(filename[, options][, listener])<br><em>说明: fs.watch API 不是 100％ 跨平台一致的，且在某些情况下不可用。递归选项只支持 macOS 和 Windows。</em></p>
<p><em>可用性</em><br>特性依赖于底层操作系统提供的一种方法来通知文件系统的变化。</p>
<ul>
<li>在 Linux 系统中，使用 inotify。</li>
<li>在 BSD 系统中，使用 kqueue。</li>
<li>在 macOS 系统中，对文件使用 kqueue，对目录使用 FSEvents。</li>
<li>在 SunOS 系统（包括 Solaris 和 SmartOS）中，使用 event ports。</li>
<li>在 Windows 系统中，该特性依赖 ReadDirectoryChangesW。</li>
<li>在 Aix 系统中，该特性依赖 AHAFS 必须是启动的。</li>
</ul>
<p><em>文件名参数</em><br>回调中提供的 filename 参数仅在 Linux、macOS、Windows、以及 AIX 系统上支持。 即使在支持的平台中，filename 也不能保证提供。 因此，不要以为 filename 参数总是在回调中提供，如果它是空的，需要有一定的后备逻辑。</p>
<p>fs.watchFile(filename[, options], listener)<br>注意：fs.watch() 比 fs.watchFile 和 fs.unwatchFile 更高效。 可能的话，应该使用 fs.watch 而不是 fs.watchFile 和 fs.unwatchFile。<br>注意: 当 fs.watchFile() 所监听的文件消失并重新出现时，第二个回调函数中返回的 previousstat (文件重新出现)将与第一个回调函数的 previousstat (消失)相同。<br>这种情况会发生在:</p>
<ul>
<li>该文件被删除，然后又恢复</li>
<li>文件重命名两次，但第二次重命名与其原名称相同</li>
</ul>
<p>fs.write(fd, buffer[, offset[, length[, position]]], callback)<br>注意，多次对同一文件使用 fs.write 且不等待回调，是不安全的。 对于这种情况，强烈推荐使用 fs.createWriteStream。<br>在 Linux 上，当文件以追加模式打开时，指定位置的写入是不起作用的。 内核会忽略位置参数，并总是将数据追加到文件的末尾。</p>
<p>fs.writeFile(file, data[, options], callback)<br>注意，多次对同一文件使用 fs.writeFile 且不等待回调，是不安全的。 对于这种情况，强烈推荐使用 fs.createWriteStream。<br>注意：如果 file 指定为一个文件描述符，则它不会被自动关闭。</p>
<p>fs 常量<br>以下常量由 fs.constants 输出。<br>注意：不是所有的常量在每一个操作系统上都是可用的。</p>
<p>文件访问常量：以下常量用于 fs.access()。<br><img src="./images/fs-const-access.png" alt="文件访问常量"></p>
<p>文件打开常量<br>以下常量用于 fs.open()。<br><img src="./images/fs-const-open-1.png" alt="文件打开常量"><br><img src="./images/fs-const-open-2.png" alt="文件打开常量"></p>
<p>文件类型常量<br>以下常量用于 fs.Stats 对象中用于决定一个文件的类型的 mode 属性。<br><img src="./images/fs-const-mode.png" alt="文件类型常量"></p>
<p>文件模式常量<br>以下常量用于 fs.Stats 对象中用于决定一个文件访问权限的 mode 属性。<br><img src="./images/fs-const-mode-1.png" alt="文件模式常量"></p>

      </div>
      
      
      
    </div>

    
    


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sun Jinkang</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">60k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">3:37</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bg-beautifier.js"></script>

  




  <script src="/js/third-party/pace.js"></script>

  






  

  
    <script type="text/javascript"
        count="150"
        opacity: 1
        src="/js/canvas-nest.min.js">
    </script>
  

</body>
<script type="text/javascript" src="/js/bg-beautifier.js"></script>
<script>hexoChangeBanner();</script>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
</html>
